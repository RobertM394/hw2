<!DOCTYPE html>
<html>
    <head>
     <meta charset="utf-8">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <style> @import url("css/styles.css"); </style> 
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="javascript.js"> </script>
    
    <script>
    //begin JQuery scripts
    $(document).ready(function(){
    
    //global variables
    
    var speakerObj = {id: 1, name: "Type 20 Studio Monitor (single)", image: "<img src='img/type20.jpg' alt='type20'>", price: 1999.00, quantity: 0, weightMultiplier: 3};
    var cableObj = {id: 2, name: "Air Matrix XLR Cables 2.0m (pair)", image: "<img src='img/xlrcables.jpg' alt='xlrCables'>", price: 249.00, quantity: 2, weightMultiplier: 1};
    var cartArray = [speakerObj, cableObj];    
    var shippingBool = false;   
    
    //begin populateCart
    populateCart();
    
    function populateCart() {
        
    //display cart items stored in cartArray
    
    //first item
    $("#cartItems").append(`<div> ${cartArray[0].image} <br> <b>  ${cartArray[0].name} </b> <br /> Price: $${cartArray[0].price} </div> `);
    $("#cartItems").append( `<div> Quantity: 

    <select id="selectOne">
        <option value=""> Select One </option>
        <option value="1"> 1 </option>
        <option value="2"> 2 </option>
        <option value="3"> 3 </option>
        <option value="4"> 4 </option>
  
        <div> <br> <br> `)    
    $("#cartItems").append("<br />")
   
   //second item
    $("#cartItems").append(`<div> ${cartArray[1].image} <br> <b>  ${cartArray[1].name} </b> <br /> Price: $${cartArray[1].price} </div> `);
    $("#cartItems").append( `<div> Quantity: 

    <select id="selectTwo">
        <option value=""> Select One </option>
        <option value="1"> 1 </option>
        <option value="2"> 2 </option>
        <option value="3"> 3 </option>
        <option value="4"> 4 </option>
  
        <div> <br /> <br /> `)    
    }
     $("#cartItems").append("<br />")
   
    //updateQuantity 
    function updateQuantity() {

        //update item quantity in cart array
        cartArray[0].quantity = $("#selectOne").val();  
        cartArray[1].quantity = $("#selectTwo").val();
        
        //record shipping option
        var shippingChoice = $("input[name=shipping]:checked").val();
        console.log(shippingChoice);
        
        if (shippingChoice == undefined) {
         $("#shippingValidation").html("Choose a shipping option.");
         
         return;
        }
     
        var itemsTotal = ( (cartArray[0].quantity * cartArray[0].price) + (cartArray[1].quantity * cartArray[1].price) )
        var salesTax = itemsTotal * 0.06
        var shippingTotal = shippingChoice * 10 * ( (cartArray[0].quantity * cartArray[0].weightMultiplier) + (cartArray[1].quantity * cartArray[1].weightMultiplier) )
        shippingBool = true;
        var orderTotal = itemsTotal + shippingTotal + salesTax;
      
        //update item quantity in cart display
        $("#itemsPrice").html(`Items: $ ${itemsTotal}`);
        $("#taxTotal").html(`Tax: $ ${salesTax}`);
        
        $("#shippingCost").html(`Shipping: $ ${shippingTotal} `);
        $("#totalPrice").html(`Order Total: $ ${orderTotal}`);
        
      
    };
    
    //update order quantity 
    $("#btnQuantity").on("click", function() {
    
    updateQuantity(); 
  
    });
    
    //place order
     $("#btnOrder").on("click", function() {
         
    if (!shippingBool) {
    $("#shippingValidation").html("Choose a shipping option.");
    
    return;
    }
    
    window.location.href = "orderCompleted.html";
  
         });//


        
    });//document ready
        
        
    </script>
    

    <title> High Fidelity Audio Shopping Cart Page </title>
    </head>
    
    <body class="text-center">
    <h1 class="jumbotron"> ♫ <strong style="font-size: 1.5em"> ƒidelity </strong> audio ♪ </h1>
    <h2 id="cartTitle">Shopping Cart </h2>
    
    
    <div id="cartItems">
    <h5> Review items and shipping: </h5> </div>
    
    <div id="placeOrder">
    <h3> Order Summary </h3>
    <p id = "itemsPrice"> Items: $0.00 </p>
    <p id = "taxTotal"> Sales Tax: $0.00 </p>
    
    
    <div id="shippingOptions">
    <p id = "shippingCost" > Shipping (UPS): $0.00 </p> 
    <input type="radio" name="shipping" id="ground" value=1> <label for="ground"> Ground </label> 
    <input type="radio" name="shipping" id="2nd" value=2> <label for="2nd"> Second Day </label> 
    <input type="radio" name="shipping" id="oneDay" value=3> <label for="oneDay"> Overnight </label> 
    
    <h3 id="shippingValidation" class="bg-danger text-white"> </h3>
    </div> <br /> <br /> 
    
    <h4 id = "totalPrice"> Order Total: </h3>
    
    <button class="btn btn-outline-success" id="btnQuantity"> Update Cart Totals </button>
    <br /> <br /> 
    <button class="btn btn-outline-success" id="btnOrder"> Place my Order </button>
     
    </div>
    
    
    </body>
</html>